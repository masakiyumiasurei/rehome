@model ClientDetailModel
@using rehome.Models.DB;
@using rehome.Enums;
@using rehome.Models.Nissi;

<div class="form-group">
    <div class="col-xs-offset-1 col-xs-11">
        <div class="row">
            @if (Model.Mode == ViewMode.Edit)
            {
                <div class="col-12 col-sm-4">
                    <a href="@Url.Action("New", "Nissi",new{顧客ID = Model.Client.顧客ID})" class="custom-btn btn-1"><i class="fa fa-plus-square" aria-hidden="true"></i>日誌新規</a>
                </div>
            }
        </div>
    </div>
</div>


@if (Model.Nissis != null)
{
    <div class="table-responsive class col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <table id="Nissis" class="table table-striped table-hover table-sm " style="width:100%">
            <thead>
                @*<tr>
            <td style="text-align:right">フィルター</td>
            <td>@Html.DropDownListFor(m => m.支援区分フィルター, 日誌表示.支援区分items(), "",  new { @class ="form-control",@id="NissiFilter[1]", onchange="NissiFilter();"} )</td>
            <td>@Html.DropDownListFor(m => m.担当名フィルター,new SelectList(Model.担当DropDownList, "Value", "Display"),  "",  new { @class ="form-control", @id="NissiFilter[2]", onchange="NissiFilter();"} )</td>
            <td>@Html.DropDownListFor(m => m.相談者名フィルター,new SelectList(Model.相談者DropDownList, "Value", "Display"),  "",  new { @class ="form-control",@id="NissiFilter[3]", onchange="NissiFilter();"} )</td>
            <td><input type="text" class="form-control" id="NissiFilter[1]" onchange="NissiFilter();" /></td>
            <td><input type="text" class="form-control" id="NissiFilter[2]" onchange="NissiFilter();" /></td>
            <td><input type="text" class="form-control" id="NissiFilter[3]" onchange="NissiFilter();" /></td>
            <td><input type="text" class="form-control" id="NissiFilter[4]" onchange="NissiFilter();" /></td>
            <td><input type="text" class="form-control" id="NissiFilter[5]" onchange="NissiFilter();" /></td>
            </tr>*@
                <tr>
                    <th class="column5">詳細</th>
                    <th class="column5">対応日</th>
                    <th class="column5">日誌区分</th>
                    <th>内容</th>
                    <th>担当名</th>
                    
                </tr>
            </thead>

            @foreach (var item in Model.Nissis)
            {
                <tr>
                    <td>
                        <a class="custom-btn btn-size-min btn-1" href="@Url.Action("Details", "Nissi", new { 日誌ID = item.日誌ID })">
                            <i class="fa fa-info-circle" aria-hidden="true"></i></a>
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.対応日)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.日誌区分)
                    </td>
                    <td>
                        <p class="omit_text" onclick="OmitTextSwitch()" style="width:100px;">@Html.DisplayFor(modelItem => item.内容)</p>
                    </td>

                    @*<td>
            @if(item.相談者リスト != null){
            for(var idx=0; idx < item.相談者リスト.Count(); idx++)
            {
            <div>@Html.DisplayFor(modelItem => item.相談者リスト[idx].相談者名)</div>
            }
            }
            </td>*@
            
                    <td>
                        <div>@Html.DisplayFor(modelItem => item.担当名)</div>                        
                    </td>


                   

                </tr>
            }
        </table>
    </div>
}
